<?php

/**
 * This code was generated by
 * \ / _    _  _|   _  _
 * | (_)\/(_)(_|\/| |(/_  v1.0.0
 * /       /
 */

namespace Twilio\Tests\Integration\Messaging\V1;

use Twilio\Exceptions\DeserializeException;
use Twilio\Exceptions\TwilioException;
use Twilio\Http\Response;
use Twilio\Serialize;
use Twilio\Tests\HolodeckTestCase;
use Twilio\Tests\Request;

class TollfreeVerificationTest extends HolodeckTestCase {
    public function testFetchRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        try {
            $this->twilio->messaging->v1->tollfreeVerifications("HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")->fetch();
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $this->assertRequest(new Request(
            'get',
            'https://messaging.twilio.com/v1/Tollfree/Verifications/HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
        ));
    }

    public function testFetchResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "sid": "HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "account_sid": "ACaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "customer_profile_sid": "BU3344409f7e067e279523808d267e2d85",
                "trust_product_sid": "BU3344409f7e067e279523808d267e2d88",
                "regulated_item_sid": "RA3344409f7e067e279523808d267e2d89",
                "date_created": "2021-01-27T14:18:35Z",
                "date_updated": "2021-01-27T14:18:36Z",
                "business_name": "Agent",
                "business_street_address": "927 Terrace St",
                "business_street_address2": "Unit 4",
                "business_city": "Tempe",
                "business_state_province_region": "AZ",
                "business_postal_code": "85281",
                "business_country": "USA",
                "business_website": "www.ghost.com",
                "business_contact_first_name": "Vikram",
                "business_contact_last_name": "Amar",
                "business_contact_email": "vikram@gmail.com",
                "business_contact_phone": "+16504988765",
                "notification_email": "vikram@gmail.com",
                "use_case_categories": [
                    "TWO_FACTOR_AUTHENTICATION",
                    "MARKETING"
                ],
                "use_case_summary": "test",
                "production_message_sample": "test1",
                "opt_in_image_urls": [
                    "https://zipwhiptestbusiness.com/images/image1.jpg",
                    "https://zipwhiptestbusiness.com/images/image2.jpg"
                ],
                "opt_in_type": "VERBAL",
                "message_volume": "1,000",
                "additional_information": "info",
                "tollfree_phone_number_sid": "PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "status": "TWILIO_APPROVED",
                "url": "https://messaging.twilio.com/v1/Tollfree/Verifications/HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "resource_links": {
                    "customer_profile": "https://trusthub.twilio.com/v1/CustomerProfiles/BU3344409f7e067e279523808d267e2d85",
                    "trust_product": "https://trusthub.twilio.com/v1/TrustProducts/BU3344409f7e067e279523808d267e2d88",
                    "channel_endpoint_assignment": "https://trusthub.twilio.com/v1/TrustProducts/BU3344409f7e067e279523808d267e2d88/ChannelEndpointAssignments/RA3344409f7e067e279523808d267e2d89"
                },
                "external_reference_id": "abc123xyz567"
            }
            '
        ));

        $actual = $this->twilio->messaging->v1->tollfreeVerifications("HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")->fetch();

        $this->assertNotNull($actual);
    }

    public function testReadRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        try {
            $this->twilio->messaging->v1->tollfreeVerifications->read();
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $this->assertRequest(new Request(
            'get',
            'https://messaging.twilio.com/v1/Tollfree/Verifications'
        ));
    }

    public function testReadResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "meta": {
                    "page": 0,
                    "page_size": 50,
                    "first_page_url": "https://messaging.twilio.com/v1/Tollfree/Verifications?Status=TWILIO_APPROVED&TollfreePhoneNumberSid=PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&PageSize=50&Page=0",
                    "previous_page_url": null,
                    "next_page_url": null,
                    "key": "verifications",
                    "url": "https://messaging.twilio.com/v1/Tollfree/Verifications?Status=TWILIO_APPROVED&TollfreePhoneNumberSid=PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&PageSize=50&Page=0"
                },
                "verifications": [
                    {
                        "sid": "HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                        "account_sid": "ACaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                        "customer_profile_sid": "BU3344409f7e067e279523808d267e2d85",
                        "trust_product_sid": "BU3344409f7e067e279523808d267e2d88",
                        "regulated_item_sid": "RA3344409f7e067e279523808d267e2d89",
                        "date_created": "2021-01-27T14:18:35Z",
                        "date_updated": "2021-01-27T14:18:36Z",
                        "business_name": "Agent",
                        "business_street_address": "927 Terrace St",
                        "business_street_address2": "Unit 4",
                        "business_city": "Tempe",
                        "business_state_province_region": "AZ",
                        "business_postal_code": "85281",
                        "business_country": "USA",
                        "business_website": "www.ghost.com",
                        "business_contact_first_name": "Vikram",
                        "business_contact_last_name": "Amar",
                        "business_contact_email": "vikram@gmail.com",
                        "business_contact_phone": "+16504988765",
                        "notification_email": "vikram@gmail.com",
                        "use_case_categories": [
                            "TWO_FACTOR_AUTHENTICATION",
                            "MARKETING"
                        ],
                        "use_case_summary": "test",
                        "production_message_sample": "test1",
                        "opt_in_image_urls": [
                            "https://zipwhiptestbusiness.com/images/image1.jpg",
                            "https://zipwhiptestbusiness.com/images/image2.jpg"
                        ],
                        "opt_in_type": "VERBAL",
                        "message_volume": "1,000",
                        "additional_information": "info",
                        "tollfree_phone_number_sid": "PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                        "status": "TWILIO_APPROVED",
                        "url": "https://messaging.twilio.com/v1/Tollfree/Verifications/HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                        "resource_links": {
                            "customer_profile": "https://trusthub.twilio.com/v1/CustomerProfiles/BU3344409f7e067e279523808d267e2d85",
                            "trust_product": "https://trusthub.twilio.com/v1/TrustProducts/BU3344409f7e067e279523808d267e2d88",
                            "channel_endpoint_assignment": "https://trusthub.twilio.com/v1/TrustProducts/BU3344409f7e067e279523808d267e2d88/ChannelEndpointAssignments/RA3344409f7e067e279523808d267e2d89"
                        },
                        "external_reference_id": "abc123xyz567"
                    }
                ]
            }
            '
        ));

        $actual = $this->twilio->messaging->v1->tollfreeVerifications->read();

        $this->assertNotNull($actual);
    }

    public function testCreateRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        try {
            $this->twilio->messaging->v1->tollfreeVerifications->create("business_name", "business_website", "notification_email", ["use_case_categories"], "use_case_summary", "production_message_sample", ["opt_in_image_urls"], "VERBAL", "message_volume", "PNXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $values = [
            'BusinessName' => "business_name",
            'BusinessWebsite' => "business_website",
            'NotificationEmail' => "notification_email",
            'UseCaseCategories' => Serialize::map(["use_case_categories"], function($e) { return $e; }),
            'UseCaseSummary' => "use_case_summary",
            'ProductionMessageSample' => "production_message_sample",
            'OptInImageUrls' => Serialize::map(["opt_in_image_urls"], function($e) { return $e; }),
            'OptInType' => "VERBAL",
            'MessageVolume' => "message_volume",
            'TollfreePhoneNumberSid' => "PNXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
        ];

        $this->assertRequest(new Request(
            'post',
            'https://messaging.twilio.com/v1/Tollfree/Verifications',
            null,
            $values
        ));
    }

    public function testCreateResponse(): void {
        $this->holodeck->mock(new Response(
            201,
            '
            {
                "sid": "HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "account_sid": "ACaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "regulated_item_sid": null,
                "customer_profile_sid": "BU3344409f7e067e279523808d267e2d85",
                "trust_product_sid": null,
                "status": "PENDING_REVIEW",
                "date_created": "2021-01-27T14:18:35Z",
                "date_updated": "2021-01-27T14:18:36Z",
                "business_name": "Agent",
                "business_street_address": "927 Terrace St",
                "business_street_address2": "Unit 4",
                "business_city": "Tempe",
                "business_state_province_region": "AZ",
                "business_postal_code": "85281",
                "business_country": "USA",
                "business_website": "www.ghost.com",
                "business_contact_first_name": "Vikram",
                "business_contact_last_name": "Amar",
                "business_contact_email": "vikram@gmail.com",
                "business_contact_phone": "+16504988765",
                "notification_email": "vikram@gmail.com",
                "use_case_categories": [
                    "TWO_FACTOR_AUTHENTICATION",
                    "MARKETING"
                ],
                "use_case_summary": "test",
                "production_message_sample": "test1",
                "opt_in_image_urls": [
                    "https://zipwhiptestbusiness.com/images/image1.jpg",
                    "https://zipwhiptestbusiness.com/images/image2.jpg"
                ],
                "opt_in_type": "VERBAL",
                "message_volume": "1,000",
                "additional_information": "info",
                "tollfree_phone_number_sid": "PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "resource_links": {},
                "url": "https://messaging.twilio.com/v1/Tollfree/Verifications/HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "external_reference_id": "abc123xyz567"
            }
            '
        ));

        $actual = $this->twilio->messaging->v1->tollfreeVerifications->create("business_name", "business_website", "notification_email", ["use_case_categories"], "use_case_summary", "production_message_sample", ["opt_in_image_urls"], "VERBAL", "message_volume", "PNXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");

        $this->assertNotNull($actual);
    }

    public function testUpdateRequest(): void {
        $this->holodeck->mock(new Response(500, ''));

        try {
            $this->twilio->messaging->v1->tollfreeVerifications("HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")->update();
        } catch (DeserializeException $e) {}
          catch (TwilioException $e) {}

        $this->assertRequest(new Request(
            'post',
            'https://messaging.twilio.com/v1/Tollfree/Verifications/HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
        ));
    }

    public function testUpdateResponse(): void {
        $this->holodeck->mock(new Response(
            200,
            '
            {
                "sid": "HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "account_sid": "ACaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "regulated_item_sid": null,
                "customer_profile_sid": "BU3344409f7e067e279523808d267e2d85",
                "trust_product_sid": null,
                "status": "PENDING_REVIEW",
                "date_created": "2021-01-27T14:18:35Z",
                "date_updated": "2021-01-27T14:18:36Z",
                "business_name": "Agent",
                "business_street_address": "927 Terrace St",
                "business_street_address2": "Unit 4",
                "business_city": "Tempe",
                "business_state_province_region": "AZ",
                "business_postal_code": "85281",
                "business_country": "USA",
                "business_website": "www.ghost.com",
                "business_contact_first_name": "Vikram",
                "business_contact_last_name": "Amar",
                "business_contact_email": "vikram@gmail.com",
                "business_contact_phone": "+16504988765",
                "notification_email": "vikram@gmail.com",
                "use_case_categories": [
                    "TWO_FACTOR_AUTHENTICATION",
                    "MARKETING"
                ],
                "use_case_summary": "test",
                "production_message_sample": "test1",
                "opt_in_image_urls": [
                    "https://zipwhiptestbusiness.com/images/image1.jpg",
                    "https://zipwhiptestbusiness.com/images/image2.jpg"
                ],
                "opt_in_type": "VERBAL",
                "message_volume": "1,000",
                "additional_information": "info",
                "tollfree_phone_number_sid": "PNaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "resource_links": {},
                "url": "https://messaging.twilio.com/v1/Tollfree/Verifications/HHaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
                "external_reference_id": null
            }
            '
        ));

        $actual = $this->twilio->messaging->v1->tollfreeVerifications("HHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX")->update();

        $this->assertNotNull($actual);
    }
}